(function(root){function getStackTrace(title){var lines,len,callstack=["Referenced From: "+title||""],i={},e=title instanceof Error?title:new Error(callstack[0]);if(e.stack)return e.stack;if(root.opera&&e.message){for(i=2,len=(lines=e.message.split("\n")).length;i<len;i++){var entry=lines[i];lines[i+1]&&(entry+=" at "+lines[i+1],i++),callstack.push(entry)}callstack.shift()}else try{for(var currentFunction=arguments.callee.caller;currentFunction;){var fn=currentFunction.toString(),fname=fn.substring(fn.indexOf("function")+8,fn.indexOf(""))||"anonymous";callstack.push(fname),currentFunction=currentFunction.caller}}catch(e){console.log("Strict mode not working correctly with your browser, reporter: UH.getStackTrace.")}return callstack.join("\n")}function printStackTrace(title){console.error(getStackTrace(title))}"undefined"!=typeof module&&module.exports&&(root=GLOBAL);try{Error.prototype.printStackTrace=function(){printStackTrace(this)}}catch(e){printStackTrace(e)}var unsafeHP={};unsafeHP.printStackTrace=printStackTrace,unsafeHP.getStackTrace=getStackTrace;var UH=unsafeHP;"function"==typeof define&&define.amd&&define("UH",[],function(){return UH}),"undefined"!=typeof module&&module.exports&&(module.exports=UH),root.UH=UH}).call(this,this),function(root){"use strict";function collectNonEnumProps(obj,keys){var nonEnumIdx=nonEnumerableProps.length,constructor=obj.constructor,proto=HP.isFunction(constructor)&&constructor.prototype||Object.prototype,prop="constructor";for(HP.has(obj,prop)&&!HP.arrayContains(keys,prop)&&keys.push(prop);nonEnumIdx--;)(prop=nonEnumerableProps[nonEnumIdx])in obj&&obj[prop]!==proto[prop]&&!HP.arrayContains(keys,prop)&&keys.push(prop)}function createIEnumerable(obj,proto){for(var objProto=createObject(proto||null),objKeys=HP.keys(obj),i=objKeys.length+1;--i;)addProperty(objProto,objKeys[i-1],hiddenProperty(obj[objKeys[i-1]]));return createObject(objProto)}var isNodejs=!1;"undefined"!=typeof module&&module.exports&&(isNodejs=!0,root=GLOBAL);var navigator=root.navigator||{userAgent:""},hiddenProperty=function(fn){return{value:fn,writable:!1,configurable:!1,enumerable:!1}},reservedPrototype={ienumerable:!0,ienumerables:!0,__isRS__:!0,__wrapped:!0},getIE=function(){var MSIEs=navigator.userAgent.split("MSIE ")[1]||"0",DNETs=navigator.userAgent.split("rv:")[1]||"0",msie=~~(MSIEs=MSIEs.split(".")[0]),dnet=~~(DNETs=DNETs.split(".")[0]);return 0!=msie?msie:0!=dnet?dnet:0},isIE=function(v){return getIE()==v},noop=function(){return function(){}},isInteger=function(i){return/^-?\d+$/.test(i+"")||/^(-?\d+)e(\d+)$/.test(i+"")},isFloat=function(v){return/^(-?\d+)(\.\d+)?$/.test(v+"")||/^(-?\d+)(\.\d+)?e(-?\d+)$/.test(v+"")},isObject=function(obj){var type=typeof(0===arguments.length?this:obj);return"function"===type||"object"===type&&!!obj},isFunction=function(obj){return"function"==typeof(0===arguments.length?this:obj)};root.hasOwnProperty||(root.hasOwnProperty=function(p){return!!root[p]});var addProperty=noop();!Object.defineProperty||0<getIE()<=8&&-1!==navigator.userAgent.indexOf("MSIE")?(addProperty=function(instance,k,descriptor){instance[k]=descriptor.value,isObject(descriptor[k])?instance[k].ienumerable=!descriptor.enumerable:(instance[k].ienumerables||(instance[k].ienumerables=[]),!descriptor.enumerable&&instance[k].ienumerables instanceof Array?instance[k].ienumerables.push(k):instance.ienumerables&&(instance.ienumerables[k]=void 0,delete instance.ienumerables[k]))},addProperty.__userDefined__=!0):addProperty=Object.defineProperty;var createObject=function(){function F(){}return function(o,p){F.prototype=o;var instance=new F;if(p)for(var k in p)p.hasOwnProperty(k)&&addProperty(instance,k,p[k]);return instance}}();try{!Object.prototype.__defineGetter__&&addProperty({},"x",{get:function(){return!0}}).x&&(addProperty(Object.prototype,"__defineGetter__",{enumerable:!1,configurable:!0,value:function(name,func){addProperty(this,name,{get:func,enumerable:!0,configurable:!0})}}),addProperty(Object.prototype,"__defineSetter__",{enumerable:!1,configurable:!0,value:function(name,func){addProperty(this,name,{set:func,enumerable:!0,configurable:!0})}}))}catch(defPropException){}!function(){var method,methods=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],length=methods.length,console=root.console||{};for(root.console||(root.console=console);length--;)console[method=methods[length]]||(console[method]=function(){})}(),function(global,infinity,undefined){function toInteger(value){var number=Number(value);return number!==number?0:0===number||infinity===number||-infinity===number?number:(0<number||-1)*Math.floor(Math.abs(number))}function requireFunction(value){if("[object Function]"!==Object.prototype.toString.call(value))throw new Error(value+" is not a function")}function requireValue(isset){if(!isset)throw new Error("reduce of empty array with no initial value")}function supportsGeneric(key){var support=!0;if(Array[key])try{Array[key](undefined,/test/,null),support=!1}catch(e){}else support=!1;return support}function extendArray(key){supportsGeneric(key)||(Array[key]=createGeneric(key))}function createGeneric(key){return function(elements){var list;if(undefined===elements||null===elements)throw new Error("Array.prototype."+key+" called on "+elements);return list=Array.prototype.slice.call(arguments,1),Array.prototype[key].apply(elements,list)}}var Array=global.Array,Object=global.Object,Math=global.Math,Number=global.Number,ES5={indexOf:function(target,begin){var length,index,elements=Object(this);for(length=elements.length>>>0,index=undefined!==begin?0>(begin=toInteger(begin))?Math.max(length+begin,0):Math.min(begin,length):0;index<length;++index)if(index in elements&&target===elements[index])return index;return-1},lastIndexOf:function(target,begin){var length,index,elements=Object(this);for(length=elements.length>>>0,index=undefined!==begin?0>(begin=toInteger(begin))?length-Math.abs(begin):Math.min(begin,length-1):length-1;-1<index;--index)if(index in elements&&target===elements[index])return index;return-1},forEach:function(callback,scope){var length,index,elements=Object(this);for(requireFunction(callback),length=elements.length>>>0,index=0;index<length;++index)index in elements&&callback.call(scope,elements[index],index,elements)},every:function(callback,scope){var length,index,elements=Object(this);for(requireFunction(callback),length=elements.length>>>0,index=0;index<length;++index)if(index in elements&&!callback.call(scope,elements[index],index,elements))return!1;return!0},some:function(callback,scope){var length,index,elements=Object(this);for(requireFunction(callback),length=elements.length>>>0,index=0;index<length;++index)if(index in elements&&callback.call(scope,elements[index],index,elements))return!0;return!1},filter:function(callback,scope){var length,index,count,result=[],elements=Object(this);for(requireFunction(callback),length=elements.length>>>0,index=count=0;index<length;++index)index in elements&&callback.call(scope,elements[index],index,elements)&&(result[count++]=elements[index]);return result},map:function(callback,scope){var length,index,result=[],elements=Object(this);for(requireFunction(callback),length=elements.length>>>0,index=0;index<length;++index)index in elements&&(result[index]=callback.call(scope,elements[index],index,elements));return result},reduce:function(callback,value){var isset,length,index,elements=Object(this);for(requireFunction(callback),isset=undefined!==value,length=elements.length>>>0,index=0;index<length;++index)index in elements&&(isset?value=callback(value,elements[index],index,elements):(value=elements[index],isset=!0));return requireValue(isset),value},reduceRight:function(callback,value){var isset,index,elements=Object(this);for(requireFunction(callback),isset=undefined!==value,index=(elements.length>>>0)-1;-1<index;--index)index in elements&&(isset?value=callback(value,elements[index],index,elements):(value=elements[index],isset=!0));return requireValue(isset),value}};for(var key in ES5)ES5.hasOwnProperty(key)&&(function(key){var support=!0;if(Array.prototype[key])try{Array.prototype[key].call(undefined,/test/,null),support=!1}catch(e){}else support=!1;return support}(key)||(Array.prototype[key]=ES5[key]),extendArray(key));if(Array.isArray=Array.isArray||function(value){return"[object Array]"===Object.prototype.toString.call(value)},["concat","join","slice","pop","push","reverse","shift","sort","splice","unshift"].forEach(extendArray),root.document)try{Array.slice(document.childNodes)}catch(e){Array.prototype.slice=function(begin,end){var result,length,index,count,elements=Object(this);for(length=elements.length>>>0,index=undefined!==begin?0>(begin=toInteger(begin))?Math.max(length+begin,0):Math.min(begin,length):0,undefined!==end&&(length=0>(end=toInteger(end))?Math.max(length+end,0):Math.min(end,length)),result=new Array(length-index),count=0;index<length;++index,++count)index in elements&&(result[count]=elements[index]);return result}}}(root,1/0),function(){function addStringMethods(method){return function(){return test[method].apply(this._str,arguments)}}function Str(str){var i,strl;if(!(this instanceof Str))return""+str;for(str+="",this._str=str,this.length=strl=str.length,i=0;i<strl;i++)this[i]=str.charAt(i)}var i,ml,method,methods,test=String("a");if(!test[0]){for(i=0,ml=(methods=["charAt","charCodeAt","concat","indexOf","lastIndexOf","localeCompare","match","replace","search","slice","split","substr","substring","toLocaleLowerCase","toLocaleUpperCase","toLowerCase","toString","toUpperCase","trim","valueOf"]).length;i<ml;i++)test[method=methods[i]]&&(Str.prototype[method]=addStringMethods(method));String.prototype.hasOwnProperty||(String.prototype.hasOwnProperty=function(p){return!!String.prototype[p]});for(method in String.prototype)String.prototype.hasOwnProperty(method)&&(Str.prototype[method]=addStringMethods(method));Str.prototype.constructor=String,String=Str}}(),"object"!=typeof root.JSON&&(root.JSON={}),function(){function f(n){return n<10?"0"+n:n}function this_value(){return this.valueOf()}function quote(string){return rx_escapable.lastIndex=0,rx_escapable.test(string)?'"'+string.replace(rx_escapable,function(a){var c=meta[a];return"string"==typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,partial,mind=gap,value=holder[key];switch(value&&"object"==typeof value&&"function"==typeof value.toJSON&&(value=value.toJSON(key)),"function"==typeof rep&&(value=rep.call(holder,key,value)),typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value)return"null";if(gap+=indent,partial=[],"[object Array]"===Object.prototype.toString.apply(value)){for(length=value.length,i=0;i<length;i+=1)partial[i]=str(i,value)||"null";return v=0===partial.length?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]",gap=mind,v}if(rep&&"object"==typeof rep)for(length=rep.length,i=0;i<length;i+=1)"string"==typeof rep[i]&&(v=str(k=rep[i],value))&&partial.push(quote(k)+(gap?": ":":")+v);else for(k in value)Object.prototype.hasOwnProperty.call(value,k)&&(v=str(k,value))&&partial.push(quote(k)+(gap?": ":":")+v);return v=0===partial.length?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}",gap=mind,v}}var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value);var gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(value,replacer,space){var i;if(gap="",indent="","number"==typeof space)for(i=0;i<space;i+=1)indent+=" ";else"string"==typeof space&&(indent=space);if(rep=replacer,replacer&&"function"!=typeof replacer&&("object"!=typeof replacer||"number"!=typeof replacer.length))throw new Error("JSON.stringify");return str("",{"":value})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(holder,key){var k,v,value=holder[key];if(value&&"object"==typeof value)for(k in value)Object.prototype.hasOwnProperty.call(value,k)&&(void 0!==(v=walk(value,k))?value[k]=v:delete value[k]);return reviver.call(holder,key,value)}var j;if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),root.hasOwnProperty||(root.hasOwnProperty=function(p){return!!root[p]}),root.jQuery&&(jQuery.fn.slideLeftHide=function(speed,callback){this.animate({width:"hide",paddingLeft:"hide",paddingRight:"hide",marginLeft:"hide",marginRight:"hide"},speed,callback)},jQuery.fn.slideLeftShow=function(speed,callback){this.animate({width:"show",paddingLeft:"show",paddingRight:"show",marginLeft:"show",marginRight:"show"},speed,callback)}),Date.prototype.pattern=function(fmt){var o={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours()%12==0?12:this.getHours()%12,"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()},week={0:"日",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六"};/(y+)/.test(fmt)&&(fmt=fmt.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(fmt)&&(fmt=fmt.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"星期":"周":"")+week[this.getDay()+""]));for(var k in o)o.hasOwnProperty(k)&&new RegExp("("+k+")").test(fmt)&&(fmt=fmt.replace(RegExp.$1,1===RegExp.$1.length?o[k]:("00"+o[k]).substr((""+o[k]).length)));return fmt},root.requestAnimationFrame=root.webkitRequestAnimationFrame||root.requestAnimationFrame||root.mozRequestAnimationFrame||root.oRequestAnimationFrame||root.msRequestAnimationFrame||function(callback){return root.setTimeout(callback,1e3/60)},String.prototype.replaceAll=function(s1,s2){return this.replace(new RegExp(s1,"gm"),s2)};var push=Array.prototype.push,slice=Array.prototype.slice,toString=Object.prototype.toString,hasOwnProperty=Object.prototype.hasOwnProperty,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeCreate=Object.create,Ctor=function(){},hasEnumBug=!{toString:null}.propertyIsEnumerable("toString"),nonEnumerableProps=["valueOf","isPropertyOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],HP={},property=function(key){return function(obj){return null==obj?void 0:obj[key]}},MAX_ARRAY_INDEX=Math.pow(2,53)-1,getLength=property("length"),isArrayLike=function(collection){var length=getLength(collection);return"number"==typeof length&&length>=0&&length<=MAX_ARRAY_INDEX};HP.likeIE=-1!==navigator.userAgent.indexOf("MSIE"),HP.ienumerable=!0,HP.isObject=isObject,HP.isFunction=isFunction,HP.isFloat=isFloat,HP.isInteger=isInteger,HP.noop=noop,HP.isIE=isIE,HP.getIE=getIE,HP.isiPhone=-1!==navigator.userAgent.indexOf("iPhone"),HP.isLollipop=-1!==navigator.userAgent.indexOf("Android 5."),HP.createIEnumerable=createIEnumerable,HP.isArrayLike=isArrayLike,HP.isCanvasSupported=function(){if(isNodejs)return!1;var canvas=document.createElement("canvas");return HP.hasOwnProperty("cv")?HP.cv:HP.cv=!(!canvas.getContext||!canvas.getContext("2d"))},HP.isWebGLSupported=function(){if(isNodejs)return!1;var canvas=document.createElement("canvas");return HP.hasOwnProperty("gl")?HP.gl:HP.gl=!(!window.WebGLRenderingContext||!canvas.getContext("webgl"))},HP.isCanvasSupported(),HP.isWebGLSupported(),HP.language=isNodejs?"":(navigator.language||navigator.browserLanguage||"").toLowerCase(),HP.localStorage={removeItem:function(key){root.hStorage||(root.hStorage={}),root.hStorage[key]=void 0},setItem:function(key,value){root.hStorage||(root.hStorage={}),root.hStorage[key]=value},getItem:function(key){return root.hStorage||(root.hStorage={}),root.hStorage[key]}},root.hasOwnProperty("sessionStorage")||root.sessionStorage||(root.sessionStorage=HP.localStorage),HP.secAddItem=function(key,value){root.sessionStorage.removeItem(key),root.sessionStorage.setItem(key,value)},HP.getItem=function(key){return root.sessionStorage.getItem(key)},HP.removeItem=function(key){root.sessionStorage.removeItem(key)},HP.Request={QueryString:function(item){var svalue=location.search.match(new RegExp("[?&]"+item+"=([^&]*)(&?)","i"));return svalue?svalue[1]:svalue}};var log=function(d){(H||HP).debug&&console.log(d)};HP.log=function(d){console&&console.log&&console.log(d)};var errlog=function(d,stackTrace){if((H||HP).debug)if(HP.printStackTrace(d),stackTrace&&!isArrayLike(stackTrace))console.error("Referenced From: "+stackTrace);else if(stackTrace&&isArrayLike(stackTrace))for(var i=stackTrace.length-1;i>-1;i--)stackTrace[i]&&console.error("Referenced From: "+stackTrace[i])};HP.newError=function(instantiatedMessage){this.name=type,this.message=instantiatedMessage||message,this.stack=(new Error).stack},HP.newError.prototype=new Error,HP.getPrettyJson=function(jsonObject){return JSON.stringify(jsonObject,null,"\t")},HP.now=Date.now||function(){return(new Date).getTime()},HP.isArray=nativeIsArray||function(obj){return"[object Array]"===toString.call(obj)},HP.keys=function(obj,strict){if(!isObject(obj))return[];if(nativeKeys)return nativeKeys(obj);var keys=[];if(null!=obj)for(var key in obj)hasOwnProperty.call(obj,key)&&keys.push(key);if(hasEnumBug&&strict&&collectNonEnumProps(obj,keys),addProperty.__userDefined__){for(var __getProto__accessor__=HP.likeIE?"prototype":"__proto__",nkeys=[],i=0;i<keys.length;i++)__getProto__accessor__!==keys[i]&&nkeys.push(keys[i]);return nkeys}return keys},HP.allKeys=function(obj){if(!isObject(obj))return[];var keys=[];for(var key in obj)keys.push(key);return hasEnumBug&&collectNonEnumProps(obj,keys),keys},HP.values=function(obj){for(var keys=HP.keys(obj),length=keys.length,values=new Array(length),i=length+1;--i;)values[i-1]=obj[keys[i-1]];return values},HP.invert=function(obj){for(var result={},keys=HP.keys(obj),i=0,length=keys.length;i<length;i++)result[obj[keys[i]]]=keys[i];return result},HP.has=function(obj,key){return null!=obj&&hasOwnProperty.call(obj,key)},HP.contains=HP.arrayContains=HP.includes=HP.include=function(obj,item,fromIndex,guard){return isArrayLike(obj)||(obj=HP.values(obj)),("number"!=typeof fromIndex||guard)&&(fromIndex=0),HP.indexOf(obj,item,fromIndex)>=0},HP.strContains=function(str,sub){return-1!==str.indexOf(sub)},HP.strContainsIgnoreCase=function(str,sub){return-1!==str.toLowerCase().indexOf(sub.toLowerCase())},HP.parseJson=function(json){try{return JSON.parse(decodeURI(json))}catch(e){try{return JSON.parse(json)}catch(e){log(e)}}},HP.cloneByParse=function(obj){return JSON.parse(JSON.stringify(obj))},HP.Event={addHandler:function(oElement,sEvent,fnHandler){oElement.addEventListener?oElement.addEventListener(sEvent,fnHandler,!1):oElement.attachEvent("on"+sEvent,fnHandler)},removeHandler:function(oElement,sEvent,fnHandler){oElement.removeEventListener?oElement.removeEventListener(sEvent,fnHandler,!1):oElement.detachEvent("on"+sEvent,fnHandler)}},HP.EventDispatcher=function(){return{listeners:{},attachListener:function(key,cb){return this.listeners[key]=this.listeners[key]||{},cb.uuid=cb.uuid||HP.fastUuid(),this.listeners[key][cb.uuid]=cb,cb.uuid},fire:function(key,data){this.listeners[key]&&HP.each(HP.wrap(this.listeners[key]),function(cb){if(cb&&"function"==typeof cb&&!cb.blocked)try{cb(data)}catch(e){log(e)}})},removeListener:function(key,func){this.listeners[key]&&(this.listeners[key]=HP.each(this.listeners[key],function(listener){if(listener.uuid!==func.uuid)return listener}).merge())},clearListener:function(key){this.listeners[key]=void 0,delete this.listeners[key]}}},HP.insist=function(fn){var result;HP.each(HP.range(0,10),function(){if(result=fn())throw{identifier:"stopiterating"};setTimeout(HP.noop(),200)}),result||console.error("Caution: target insisted remains undefiend: "+fn)},HP.widthOf=function(ele){return ele.innerWidth||ele.clientWidth},HP.heightOf=function(ele){return ele.innerHeight||ele.clientHeight},HP.parentOf=function(ele){return ele.parentElement||ele.parentNode},HP.windowWidth=function(){return root.innerWidth||("BackCompat"==document.compatMode?document.body.clientWidth:document.documentElement.clientWidth)},HP.windowHeight=function(){return root.innerHeight||("BackCompat"==document.compatMode?document.body.clientHeight:document.documentElement.clientHeight)},HP.escape2Html=HP.unescape||function(str){var arrEntities={lt:"<",gt:">",nbsp:" ",amp:"&",quot:'"'};return str.replace(/&(lt|gt|nbsp|amp|quot);/gi,function(all,t){return arrEntities[t]})},HP.encodeHTML=function(url){return url.replaceAll("#","%23")},HP.translateFromWindowToCanvas=function(canvas,x,y){var bbox=canvas.getBoundingClientRect();return{x:x-bbox.left-(bbox.width-canvas.width)/2,y:y-bbox.top-(bbox.height-canvas.height)/2}},HP.css=function(ele,attr,val){if(this===HP||(val=attr,attr=ele,ele=this),void 0==val&&"string"==typeof attr)return window.getComputedStyle(ele)[attr];"string"==typeof attr?(isArrayLike(ele)&&(1===ele.length?ele[0].style[attr]=val:HP.every(ele,function(e){e.style[attr]=val})),ele instanceof Element&&(ele.style[attr]=val)):isObject(attr)&&(isArrayLike(ele)&&(1===ele.length?HP.every(attr,function(v,a){ele[0].style[a]=v}):HP.every(attr,function(v,a){HP.every(ele,function(e){e.style[a]=v})})),ele instanceof Element&&HP.every(attr,function(v,a){ele.style[a]=v}))},HP.text=function(ele,text){if(this===HP||(text=ele,ele=this),void 0==text&&(text=""),isArrayLike(ele))HP.every(ele,function(e){for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(text))});else if(ele instanceof Element){for(;ele.firstChild;)ele.removeChild(ele.firstChild);ele.appendChild(document.createTextNode(text))}},HP.attribute=function(ele,attr,val){if(this===HP||(val=attr,attr=ele,ele=this),void 0==val)return ele.getAttribute(attr);isArrayLike(ele)&&(1===ele.length?ele[0].setAttribute(attr,val):HP.every(ele,function(e){e.setAttribute(attr,val)})),ele instanceof Element&&ele.setAttribute(attr,val)},HP.click=function(ele,func){(this instanceof Element||isArrayLike(this))&&!func&&(func=ele,ele=this),func?isArrayLike(ele)?1===ele.length?ele[0]instanceof Element&&(ele[0].onclick=func):HP.every(ele,function(e){e instanceof Element&&(e.onclick=func)}):ele instanceof Element&&(ele.onclick=func):ele.onclick&&"function"==typeof ele.onclick&&ele.onclick.apply(ele)},HP.cloneDom=function(ele){if(!ele&&this&&(this instanceof Element||isArrayLike(this))&&(ele=this),ele){var clone;return ele instanceof Element?clone=Element.prototype.cloneNode:isArrayLike(ele)&&(clone=1===ele.length?function(){return Element.prototype.cloneNode.apply(ele[0],[!0])}:function(deep){return HP.coreEach(ele,function(e){if(e instanceof Element)return Element.prototype.cloneNode.apply(e,[deep])},{noEmpty:1})}),clone.apply(ele,[!0])}},HP.append=function(ele,children){!children&&(this instanceof Element||isArrayLike(this))&&(children=ele,ele=this),ele&&(isArrayLike(children)&&children.length>1?HP.every(children,function(child){child instanceof Element&&ele.appendChild(child)}):isArrayLike(children)?children[0]instanceof Element&&ele.appendChild(children[0]):children instanceof Element&&ele.appendChild(children))},HP.cefQuery=root.cefQuery||function(){root.H&&root.H.debug&&console.log(arguments[0])},HP.callCef=function(req,persistent,onsuccess,onfailure){return HP.cefQuery({request:req||"",persistent:!!persistent,onSuccess:onsuccess||function(response){},onFailure:onfailure||function(err_code,err_msg){}})},HP.range=function(start,stop,step){null==stop&&(stop=start||0,start=0),step=step||1;for(var length=Math.max(Math.ceil((stop-start)/step),0),range=new Array(length),idx=0;idx<length;idx++,start+=step)range[idx]=start;return range},HP.indexOf=function(arr,item,idx){var keyArr=isArrayLike(arr)?arr:HP.keys(arr);if(void 0===idx)idx=0;else if(idx>keyArr.length)return-1;for(var i=idx;i<keyArr.length;i++)if(keyArr[i]==item)return i;return-1},HP.extractKey=function(obj,key){for(var keys=HP.keys(obj),narr=[],i=0;i<keys.length;i++)narr.push(obj[keys[i]][key]);return narr},HP.shuffle=function(obj){var rand,s=isArrayLike(obj)?obj:HP.values(obj),length=s.length,shuffled=new Array(length);do{(rand=HP.random(0,length-1))===length-1&&(shuffled[length-1]=shuffled[rand]),shuffled[rand]=s[length-1]}while(--length);return shuffled},HP.sample=function(obj,n,guard){return null==n||guard?(isArrayLike(obj)||(obj=HP.values(obj)),obj[HP.random(obj.length-1)]):HP.shuffle(obj).slice(0,Math.max(0,n))};var baseCreate=function(prototype){if(!_.isObject(prototype))return{};if(nativeCreate)return nativeCreate(prototype);Ctor.prototype=prototype;var result=new Ctor;return Ctor.prototype=null,result},executeBound=function(sourceFunc,boundFunc,context,callingContext,args){if(!(callingContext instanceof boundFunc))return sourceFunc.apply(context,args);var self=baseCreate(sourceFunc.prototype),result=sourceFunc.apply(self,args);return isObject(result)?result:self};HP.partial=function(func){var boundArgs=slice.call(arguments,1),bound=function(){for(var position=0,length=boundArgs.length,args=new Array(length),i=0;i<length;i++)args[i]=boundArgs[i]===HP?arguments[position++]:boundArgs[i];for(;position<arguments.length;)args.push(arguments[position++]);return executeBound(func,bound,this,this,args)};return bound},HP.debounce=function(func,wait,immediate){var timeout,args,context,timestamp,result,later=function(){var last=HP.now()-timestamp;last<wait&&last>=0?timeout=setTimeout(later,wait-last):immediate||(result=func.apply(context,args),timeout||(context=args=null))};return function(){context=this,args=arguments,timestamp=HP.now();var callNow=immediate&&!timeout;return timeout||(timeout=setTimeout(later,wait)),callNow&&(result=func.apply(context,args),context=args=null),result}},HP.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args)},wait)},HP.throttle=function(func,wait,options){var context,args,result,timeout=null,previous=0;options||(options={});var later=function(){previous=!1===options.leading?0:HP.now(),timeout=null,result=func.apply(context,args),timeout||(context=args=null)};return function(){var now=HP.now();previous||!1!==options.leading||(previous=now);var remaining=wait-(now-previous);return context=this,args=arguments,remaining<=0||remaining>wait?(timeout&&(clearTimeout(timeout),timeout=null),previous=now,result=func.apply(context,args),timeout||(context=args=null)):timeout||!1===options.trailing||(timeout=setTimeout(later,remaining)),result}},HP.after=function(times,func){return function(){if(--times<1)return func.apply(this,arguments)}},HP.before=function(times,func){var memo;return function(){return--times>0&&(memo=func.apply(this,arguments)),times<=1&&(func=null),memo}},HP.once=HP.partial(HP.before,2),HP.find=function(list,fn){if(isFunction(fn)){var keys,isarr=isArrayLike(list);isarr||(keys=HP.keys(list));var i=isarr?list.length:keys.length;if(0===i)return;var k;for(i+=1;--i;)if(k=isarr?i-1:keys[i-1],fn(list[k],k))return list[k]}else errlog("HP.find error: iterating via "+fn+" which should be a function")},HP.sortBy=function(list,fn){var keys=[];if(isArrayLike(list)?keys=HP.range(list.length):(list=HP.values(list),keys=HP.keys(list)),isObject(list)){if(!isFunction(fn)){var field=fn;fn=function(obj){return obj[field]}}var idx=new Array(list.length),i=list.length;if(0!==i){var k;do{idx[k=keys[i-1]]={index:i-1,value:list[k],it:fn(list[k])}}while(--i);return HP.extractKey(idx.sort(function(left,right){return left.it<right.it?-1:left.it>right.it?1:0}),"value")}}else errlog("HP.sortBy error: try to sort a primitive value")},HP.groupBy=function(list,fn){var keys=[],values=HP.wrap();if("string"==typeof fn){var key=fn;fn=function(obj){return obj[key]}}return HP.each(list,function(item){if(void 0!==item){var key=fn.call(item,item),indexL=keys.indexOf(key);-1===indexL&&(indexL=keys.length,keys.push(key)),values[indexL]||(values[indexL]=[]),values[indexL].push(item)}}),HP.wrap(values.toArray())},HP.forEach=function(array,iterator){isArrayLike(array)||(array=H.wrap(array).toArray());var l=array.length,length=l;for(l++;--l;)iterator(length-l,array[length-l])},HP.coreEach=function(object,iteratee,options,stackTraceStack){var stopper=(options=options||{}).stopper,noRS=options.noRS,drop=options.dropResult,noEmpty=options.noEmpty,asObject=options.asObject,noValidation=options.noValidation;if(options.debug||(H||HP).debug){var olditeratee=iteratee;stackTraceStack||(stackTraceStack=[]),isArrayLike(stackTraceStack)||(stackTraceStack=[stackTraceStack]),iteratee=function(){try{return olditeratee.apply(null,arguments)}catch(e){stackTraceStack.push(HP.getStackTrace(e)),errlog("Bug sacked: ",stackTraceStack)}}}if(void 0!==object){var isarray=isArrayLike(object)&&!asObject,baseResult=isarray?[]:{},iterator=noRS?baseResult:HP.wrap(baseResult);if(!noValidation&&object.ienumerable)return console.warn("Iterating over ienumerable object."),baseResult;if(isarray){if(0===object.length)return drop?void 0:iterator;var l=object.length,cl=0;if(stopper)for(l+=1;--l;){if(iterator[cl]=iteratee(object[cl],cl,object,iterator),stopper(iterator[cl]))return iterator;cl++}else for(l+=1;--l;)iterator[cl]=iteratee(object[cl],cl,object,iterator),cl++}else{var banned={};if(!noValidation&&object.ienumerables&&object.ienumerables!==[]){var k=object.ienumerables.length;if(0!==k)for(k+=1;--k;)banned[object.ienumerables[k-1]]=!0}var key,keys=HP.keys(object),i=keys.length,ki=0;if(0===i)return drop?void 0:iterator;var it,ci=0;for(i+=1;--i;)it=keys[ci],reservedPrototype[it]&&(keys[ci]=void 0),noValidation||!banned[it]&&!it.ienumerable||(keys[ci]=void 0),ci++;if(stopper){for(i=keys.length+1;--i;)if((key=keys[ki++])&&(iterator[key]=iteratee(object[key],key,object,iterator),noEmpty&&void 0===iterator[key]&&delete iterator[key],stopper(object[key])))return asObject?iterator:HP.values(iterator)}else for(i=keys.length+1;--i;)(key=keys[ki++])&&(iterator[key]=iteratee(object[key],key,object,iterator),noEmpty&&void 0===iterator[key]&&delete iterator[key])}return drop?void 0:iterator}errlog("Iterating over undefined ",stackTraceStack)},HP.every=function(list,iteratee,stackStack){HP.coreEach(list,iteratee,{dropResult:1},stackStack)},HP.map=function(list,iteratee,stackStack){return HP.coreEach(list,iteratee,{noEmpty:1,asObject:0},stackStack)},HP.until=function(list,iteratee,stackStack){return HP.coreEach(list,function(){},{stopper:iteratee},stackStack)},HP.each=HP.coreEach,HP.ceach=function(list,iteratee,nocheck,nostop,eachKeyIteratee,noRS,forceCheckKeys,ignoreUndefined,stackTrace){function processEachError(e,key){log("Received exception inside HP.each: "+e),e.margin||(iterator[key]=void 0,delete iterator[key]),e instanceof Error&&errlog("Error: iterating over unexcepted key: "+key,stackTrace)}void 0===list&&errlog("Iterating over undefined object",stackTrace);var iterator=noRS?{}:HP.wrap();if(!isArrayLike(list)||forceCheckKeys){var keys,i,banned={},shouldCheck=!!list.ienumerables&&list.ienumerables!==[];if(!nocheck&&shouldCheck){var k=list.ienumerables.length;if(0!==k)for(k+=1;--k;)banned[list.ienumerables[k-1]]=!0}if(keys=HP.keys(list),0===(i=keys.length))return iterator;var it,ci=0;for(i+=1;--i;)it=keys[ci],reservedPrototype[it]&&(keys[ci]=void 0),!nocheck&&shouldCheck&&(banned[it]||it.ienumerable)&&(keys[ci]=void 0),ci++;HP.find(keys,eachKeyIteratee||function(key){if(!key)return!1;if(nostop)return iterator[key]=iteratee(list[key],key,list,iterator),iterator[key]||delete iterator[key],!1;try{iterator[key]=iteratee(list[key],key,list,iterator),iterator[key]||delete iterator[key]}catch(e){return processEachError(e,key),e.identifier&&"stopiterating"===e.identifier}})}else{if(0===list.length)return;var cIteratee=eachKeyIteratee||function(key,val,control){if(nostop)iterator[key]=iteratee(val,key,list,iterator),iterator[key]||delete iterator[key];else try{iterator[key]=iteratee(val,key,list,iterator),iterator[key]||delete iterator[key]}catch(e){processEachError(e,key),e.identifier&&"stopiterating"===e.identifier&&(control.s=1)}},l=list.length,s={s:0},cl=0;for(l+=1;--l&&(cIteratee(cl,list[cl],s),!s.s);)cl++}return iterator},HP.eachIndex=function(){var length=arguments.length;if(!(length<2||length>4)){var start=length>2?arguments[0]:0,end=2===length?arguments[0]:arguments[1],step=length>=4?arguments[2]:1,iteratee=arguments[length-1],rs=HP.wrap(),i=0;if(1===step){var ci=start;for(i=end-start+1;--i;)rs[ci]=iteratee(ci,ci),ci++;return rs}do{rs[start]=iteratee(start,i++),start+=step}while(start<=end);return rs}};var RS={};RS.each=RS.forEach=function(){return HP.each.apply(HP,[this].concat(Array.prototype.slice.call(arguments)))},RS.filter=function(fn){return HP.coreEach(this,function(o){if(fn(o))return o},{noEmpty:1})},RS.sortBy=function(fn){return HP.sortBy(this,fn)},RS.toArray=function(){return HP.values(this)},RS.groupBy=function(fn){return HP.groupBy(this,fn)},RS.join=function(separator){return HP.values(this).join(separator||"")},RS.sum=function(){var s=0;return HP.each(this,function(v){var nv=isInteger(v)?parseInt(v):isFloat(v)?parseFloat(v):NaN;isNaN(v)||(s+=nv)}),s},RS.Length=function(){return HP.values(this).length},RS.merge=function(){return this},RS.values=function(){return HP.values(this)},RS.css=HP.css,RS.text=HP.text,RS.attribute=HP.attr,RS.clone=HP.cloneDom,RS.append=HP.append,HP.RSProto=createIEnumerable(RS),addProperty(HP.RSProto,"__isRS__",hiddenProperty(!0));var __innerFunc=function(){};__innerFunc.prototype=HP.RSProto,HP.wrap=HP.RSFactory=function(data){if(!data)return new __innerFunc;if(!data.__isRS__){var r=HP.__replaceRootProto__(data,__innerFunc);if(r)return r}return data},HP.fastWrap=function(){return new __innerFunc};var H$=function(selector){var result;return"string"==typeof selector&&(result="#"===selector[0]?document.getElementById(selector.substring(1)):"."===selector[0]?document.getElementsByClassName(selector.substring(1)):document.getElementsByTagName(selector)),result};if(Element.prototype.querySelectorAll&&(H$=function(){var func=this?Element.prototype.querySelectorAll:document.querySelectorAll;return HP.wrap(func.apply(this||document,arguments))}),root.H$=H$,void 0!=window.Element){for(var RSKeys=HP.keys(RS),i=RSKeys.length+1;--i;)Element.prototype[RSKeys[i-1]]=RS[RSKeys[i-1]];Element.prototype.__isDOM__=!0,Element.prototype.css=HP.css,Element.prototype.text=HP.text,Element.prototype.find=H$,Element.prototype.attribute=HP.attribute,Element.prototype.clicked=HP.click}HP.__getProto__=function(obj){return Object.getPrototypeOf?Object.getPrototypeOf(obj):obj.__proto__?obj.__proto__:obj.constructor.prototype},HP.__setProto__=function(obj,proto){if(Object.setPrototypeOf)Object.setPrototypeOf(obj,proto);else if(obj.__proto__)obj.__proto__=proto;else{if(!obj.prototype){var p=createObject(proto);return HP.each(obj,function(v,k){addProperty(p,k,hiddenProperty(v))}),p}obj.prototype=proto}},HP.__getProto__accessor__=HP.likeIE?"prototype":"__proto__",HP.__replaceRootProto__=function(obj,proto){if(isObject(obj)){for(var p=obj,pp=HP.__getProto__(p);void 0!==pp&&pp!==Object.prototype&&pp!==Array.prototype;){if(pp==proto)return;p=pp,pp=HP.__getProto__(p)}p||errlog("Unexpected error: cannot find the root prototype of "+obj);var k=HP.__setProto__(p,HP.RSProto);return k||void 0}errlog("Attempt to replace the prototype of a non-object item: "+obj)},HP.basedOnObject=function(obj){return obj[HP.__getProto__accessor__]==Object.prototype},HP.hypot=Math.hypot||function(){return Math.sqrt(HP.each(arguments,function(arg){return arg*arg}).sum())},HP.log2=Math.log2||function(number){return Math.log(number)/Math.log(2)},HP.varInRange=function(v,v0,v1){return(v-v0)*(v-v1)<0},HP.pointInRect=function(p,p0,p1){var result=!0;return HP.each(p,function(ele,index){result&=HP.varInRange(ele,p0[index],p1[index])}),result},HP.degToRad=function(degree){return degree/180*Math.PI},HP.radToDeg=function(rad){return 180*rad/Math.PI},HP.standardizeDegree=function(degree){return degree-360*Math.floor(degree/360)},HP.standardizeRad=function(rad){return rad-2*Math.floor(rad/(2*Math.PI))*Math.PI},HP.rectToPolar=function(coor){var r=HP.hypot(coor[0],coor[1]),absTheta=Math.atan2(Math.abs(coor[1]),Math.abs(coor[0])),signal=coor[0]*coor[1]<0;return coor[0]>=0?coor[1]>=0?[r,absTheta]:[r,2*Math.PI-absTheta]:[r,Math.PI+(signal?-1:1)*absTheta]},HP.polarToRect=function(coor){var cA=Math.cos(coor[1]),sA=Math.sin(coor[1]);return[coor[0]*cA,coor[0]*sA]},HP.latToMeter=function(delta){return 40008e3*delta/360},HP.lngToMeterAtLat=function(lat,delta){return delta*Math.cos(Math.PI*Math.abs(lat)/180)*40075040/360},HP.meterToLat=function(meter){return 360*meter/40008e3},HP.meterToLngAtLat=function(lat,meter){return 360*meter/(40075040*Math.cos(Math.PI*Math.abs(lat)/180))},HP.distOnEarth=function(p0,p1){return 64e5*Math.PI*Math.acos(Math.cos(p0[0]-p1[0])+Math.cos(p0[1]-p1[1])-1)/180},HP.max=function(list){var mx=-1/0;return HP.each(list,function(v){v>mx&&(mx=v)}),mx},HP.min=function(list){var mx=1/0;return HP.each(list,function(v){v<mx&&(mx=v)}),mx},HP.maxValue=function(obj){return HP.max(HP.values(obj))},HP.minValue=function(obj){return HP.min(HP.values(obj))},HP.randomMappers={0:function(string){return HP.eachIndex(string.length,function(i){return string.charCodeAt(i)}).sum()},1:function(string){return HP.eachIndex(string.length,function(i){return string.charCodeAt(i)*(i%2==0?1:-1)}).sum()}},HP.bloomFilter=function(){return{val:{},mappers:HP.randomMappers,add:function(string){var self=this;HP.each(self.mappers,function(mapper){self.val[mapper(string)]=1})},query:function(string){var self=this,count=HP.each(self.mappers,function(mapper){return"function"==typeof mapper?1:0}).sum();return HP.each(self.mappers,function(mapper){return self.val[mapper(string)]}).sum()===count}}},HP.countingBloomFilter=function(){return{val:{},mappers:HP.randomMappers,add:function(string){var self=this;HP.each(self.mappers,function(mapper){self.val[mapper(string)]=void 0===self.val[mapper(string)]?1:self.val[mapper(string)]+1})},query:function(string){var self=this,count=HP.each(self.mappers,function(mapper){return"function"==typeof mapper?1:0}).sum();return HP.each(self.mappers,function(mapper){return self.val[mapper(string)]?1:0}).sum()===count},remove:function(string){var self=this;!self.check(string)||HP.each(self.mappers,function(mapper){var newVal=self.val[mapper(string)]-1;0!==newVal?self.val[mapper(string)]=newVal:(self.val[mapper(string)]=void 0,delete self.val[mapper(string)])})}}};var FSLLN=function(id,data,s,e,f,p,n){return{d:data,i:id,s:s,e:e,f:f,p:p,n:n,v:1,o:[]}},FSLL=function(id,size,data,oc){var self=this,head=new FSLLN(id,data,0,size,!oc);self.fragments=[head],self.data=data,self.head=head,self.tail=head,self.splitNode=function(node,len1){if(node.e-node.s<=len1)throw"trying to alloc or free in a smaller space";if(!node.v)throw"trying to operate an invalid memory block";var vn={d:node.d,i:node.i,s:node.s+len1,e:node.e,f:node.f,p:node,n:node.n,v:1,o:[]};return node.e=node.s+len1,node.n=vn,self.fragments[self.fragments.length]=vn,vn.n||(self.tail=vn),node},self.mergeNode=function(node){if(!node.n)throw"trying to merge a tail";if(node.n.f!==node.f)throw"cannot merge two different spaces";if(node.i!==node.n.i)throw"cannot merge into a cross-block node";if(node.e!==node.n.s)throw"cannot merge two separate nodes";if(0===node.n.o.length);else if(node.o.length===node.n.o.length){var occupacy=[],nl=node.n.o.length-1,nli=0;HP.each(node.o,function(holder){occupacy[holder]=1});do{if(!occupacy[node.n.o[nli++]])throw"cannot merge nodes with different owners"}while(nl--)}node.n.v=0,node.e=node.n.e,node.n.p=void 0,node.n=node.n.n}};HP.LinkedList=function(id,size,data){return new FSLL(id,size,data)},HP.LinkedListNode=function(){return FSLLN.apply(null,arguments)},HP.uuid=function(len,radix){var i,chars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),uuid=[];if(radix=radix||chars.length,len)for(i=0;i<len;i++)uuid[i]=chars[0|Math.random()*radix];else{var r;for(uuid[8]=uuid[13]=uuid[18]=uuid[23]="-",uuid[14]="4",i=0;i<36;i++)uuid[i]||(r=0|16*Math.random(),uuid[i]=chars[19==i?3&r|8:r])}return uuid.join("")},HP.fastUuid=function(){for(var r,chars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),uuid=new Array(36),rnd=0,i=0;i<36;i++)8===i||13===i||18===i||23===i?uuid[i]="-":14===i?uuid[i]="4":(rnd<=2&&(rnd=33554432+16777216*Math.random()|0),r=15&rnd,rnd>>=4,uuid[i]=chars[19===i?3&r|8:r]);return uuid.join("")},HP.getUrlByParams=function(server,action,params){var paramUrl="";return HP.each(params,function(param,key){paramUrl+="&"+key+"=";var p="";if(param instanceof Array){p="[";var tr="";HP.each(param,function(val){tr+=",",val instanceof Boolean||val instanceof String||val instanceof Number||"string"==typeof val||"number"==typeof val?tr+='"'+val+'"':val&&(tr+=val)}),p+=tr.substr(1)+"]"}else p=param;paramUrl+=p}),server+action+"?"+paramUrl.substr(1)},HP.param=function(data){var s=[],add=function(k,v){s[s.length]=encodeURIComponent(k)+"="+encodeURIComponent(v)};return HP.each(data,function(o,k){add(k,o)}),s.join("&").replace(/%20/g,"+")},HP.random=function(min,max){return null==max&&(max=min,min=0),min+Math.floor(Math.random()*(max-min+1))};var escapeMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},unescapeMap=HP.invert(escapeMap),createEscaper=function(map){var escaper=function(match){return map[match]},source="(?:"+HP.keys(map).join("|")+")",testRegexp=new RegExp(source),replaceRegexp=new RegExp(source,"g");return function(string){return string=null==string?"":""+string,testRegexp.test(string)?string.replace(replaceRegexp,escaper):string}};HP.escape=createEscaper(escapeMap),HP.unescape=createEscaper(unescapeMap),HP.emptyObject=function(obj){},HP.nonceStr=function(){for(var s="",i=0;i<16;i++)s+="0123456789qwertyuiopasdfghjklzxcvbnm"[parseInt(36*Math.random())];return s},HP.clearTimer=function(timer){timer&&clearInterval(timer)},HP.amapEventExtData=function(event){return HP.coreEach(event.target,function(ele){if("object"==typeof ele&&ele.hasOwnProperty("extData"))return ele},{noEmpty:1}).toArray()[0]},HP.test=function(cb){var o=HP.now();cb();var d=HP.now()-o;return log(d),d};var a0,a1,a2,a3,b0,b1,b2,b3,tb1,sign,exponent,mantissa;HP.readInt32=function(byteView,offset,littleEndian){return a0=byteView[offset+0],a1=byteView[offset+1],a2=byteView[offset+2],a3=byteView[offset+3],littleEndian?(a3=a3<<24>>>0,a2<<=16,a1<<=8):(a0=a0<<24>>>0,a1<<=16,a2<<=8),a3+a2+a1+a0},HP.readInt16=function(byteView,offset,littleEndian){return a0=byteView[offset+0],a1=byteView[offset+1],littleEndian?a1<<=8:a0<<=8,a0+a1};var native=1==new Int8Array(new Int16Array([1]).buffer)[0];HP.readFloat32=function(byteView,index,littleEndian){return void 0===littleEndian&&(littleEndian=native),littleEndian?(b0=byteView[index+3],b1=byteView[index+2],b2=byteView[index+1],b3=byteView[index]):(b0=byteView[index],b1=byteView[index+1],b2=byteView[index+2],b3=byteView[index+3]),tb1=b0>>7,sign=1-2*tb1,b0<<=1,tb1=b1>>7,b0&=255,exponent=(b0|tb1)-127,tb1=127&b1,tb1<<=16,b2<<=8,mantissa=tb1|b2|b3,128===exponent?0!==mantissa?NaN:sign*(1/0):-127===exponent?sign*mantissa*Math.pow(2,-149):sign*(1+mantissa*Math.pow(2,-23))*Math.pow(2,exponent)},HP.each(UH,function(func,key){HP[key]=func});var H=createIEnumerable(HP);addProperty(H,"debug",{value:!1,writable:!0,configurable:!1,enumerable:!1}),"function"==typeof define&&define.amd&&define("H",["UH"],function(){return H}),"undefined"!=typeof module&&module.exports&&(module.exports=H),root.H=H,Object.defineProperty(root,"H",{value:H,writable:!1,configurable:!1,enumerable:!0})}.call(this,this);